{
  "info": {
    "_postman_id": "74582fee-593f-422a-a25f-c7466027efca",
    "name": "DevMesh REST API",
    "description": "Complete DevMesh REST API Collection\n\n**Stories Implemented:**\n- Epic 1-3: Foundation, Health, Authentication \u2705\n- Epic 4: Sessions (4.1-4.3) \u2705\n- Epic 5: Dynamic Tools (5.1-5.5) \u2705",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health & Monitoring",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/health",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "health"
              ]
            },
            "description": ""
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"OK\", () => pm.response.to.have.status(200));"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Liveness",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/healthz",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "healthz"
              ]
            },
            "description": ""
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"OK\", () => pm.response.to.have.status(200));"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Readiness",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/readyz",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "readyz"
              ]
            },
            "description": ""
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"OK\", () => pm.response.to.have.status(200));"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Metrics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/metrics",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "metrics"
              ]
            },
            "description": ""
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"OK\", () => pm.response.to.have.status(200));"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Migration Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/migration-status",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "admin",
                "migration-status"
              ]
            },
            "description": ""
          },
          "response": []
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            },
            "description": "",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@devmesh.io\",\n  \"password\": \"devmesh123\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"OK\", () => pm.response.to.have.status(200));",
                  "const j = pm.response.json();",
                  "pm.collectionVariables.set(\"auth_token\", j.auth_token);",
                  "pm.collectionVariables.set(\"refresh_token\", j.refresh_token);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/auth/logout",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "logout"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/auth/refresh",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "refresh"
              ]
            },
            "description": "",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh_token\": \"{{refresh_token}}\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Register Organization",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register/organization",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register",
                "organization"
              ]
            },
            "description": "",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"organization_name\": \"Test Corp\",\n  \"admin_email\": \"admin@test.com\",\n  \"admin_password\": \"Pass123!\",\n  \"admin_name\": \"Admin\"\n}"
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Sessions",
      "item": [
        {
          "name": "Create Session",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/sessions",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions"
              ]
            },
            "description": "",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"client_info\": {\n    \"name\": \"postman\",\n    \"version\": \"1.0\"\n  }\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Created\", () => pm.response.to.have.status(201));",
                  "pm.collectionVariables.set(\"session_id\", pm.response.json().session_id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "List Sessions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/sessions",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Get Session",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/sessions/{{session_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions",
                "{{session_id}}"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Refresh Session",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/sessions/{{session_id}}/refresh",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions",
                "{{session_id}}",
                "refresh"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Validate Session",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/sessions/{{session_id}}/validate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions",
                "{{session_id}}",
                "validate"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Get Active Sessions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/sessions/active",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions",
                "active"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Get Session Metrics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/sessions/metrics",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions",
                "metrics"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Delete Session",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/sessions/{{session_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions",
                "{{session_id}}"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Record Tool Execution",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/sessions/{{session_id}}/tools/execute",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions",
                "{{session_id}}",
                "tools",
                "execute"
              ]
            },
            "description": "",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tool_id\": \"{{tool_id}}\",\n  \"action\": \"list\",\n  \"parameters\": {}\n}"
            }
          },
          "response": []
        },
        {
          "name": "Get Tool Executions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/sessions/{{session_id}}/tools/executions",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions",
                "{{session_id}}",
                "tools",
                "executions"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Record Activity",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/sessions/{{session_id}}/activity",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "sessions",
                "{{session_id}}",
                "activity"
              ]
            },
            "description": "",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"activity_type\": \"tool_execution\",\n  \"metadata\": {}\n}"
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Dynamic Tools",
      "item": [
        {
          "name": "List Tools",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Create Tool",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools"
              ]
            },
            "description": "",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test API\",\n  \"base_url\": \"https://api.example.com\",\n  \"provider\": \"custom\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Created\", () => pm.response.to.have.status(201));",
                  "pm.collectionVariables.set(\"tool_id\", pm.response.json().id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Tool",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools/{{tool_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools",
                "{{tool_id}}"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Update Tool",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools/{{tool_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools",
                "{{tool_id}}"
              ]
            },
            "description": "",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"display_name\": \"Updated API\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Delete Tool",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools/{{tool_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools",
                "{{tool_id}}"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Tool Discovery",
          "item": [
            {
              "name": "Start Discovery",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/v1/tools/discover",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "tools",
                    "discover"
                  ]
                },
                "description": "",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"base_url\": \"https://api.github.com\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.collectionVariables.set(\"discovery_session_id\", pm.response.json().session_id);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Get Discovery Status",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/v1/tools/discover/{{discovery_session_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "tools",
                    "discover",
                    "{{discovery_session_id}}"
                  ]
                },
                "description": ""
              },
              "response": []
            },
            {
              "name": "Confirm Discovery",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/v1/tools/discover/{{discovery_session_id}}/confirm",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "tools",
                    "discover",
                    "{{discovery_session_id}}",
                    "confirm"
                  ]
                },
                "description": "",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"GitHub API\",\n  \"provider\": \"github\"\n}"
                }
              },
              "response": []
            },
            {
              "name": "Discover Multiple APIs",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/v1/tools/discover-multiple",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "tools",
                    "discover-multiple"
                  ]
                },
                "description": "",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"portal_url\": \"https://app.harness.io\"\n}"
                }
              },
              "response": []
            },
            {
              "name": "Create Tools from Multiple",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/v1/tools/discover-multiple/create",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "tools",
                    "discover-multiple",
                    "create"
                  ]
                },
                "description": "",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"portal_url\": \"https://app.harness.io\",\n  \"name_prefix\": \"Harness\"\n}"
                }
              },
              "response": []
            },
            {
              "name": "Enhanced Discovery",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/v1/tools/discover-enhanced",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "tools",
                    "discover-enhanced"
                  ]
                },
                "description": "",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"base_url\": \"https://api.github.com\"\n}"
                }
              },
              "response": []
            }
          ]
        },
        {
          "name": "List Tool Actions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools/{{tool_id}}/actions",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools",
                "{{tool_id}}",
                "actions"
              ]
            },
            "description": ""
          },
          "response": []
        },
        {
          "name": "Execute Tool Action",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools/{{tool_id}}/execute",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools",
                "{{tool_id}}",
                "execute"
              ]
            },
            "description": "",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"list_repositories\",\n  \"parameters\": {\n    \"owner\": \"github\"\n  }\n}"
            }
          },
          "response": []
        },
        {
          "name": "Check Tool Health",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools/{{tool_id}}/health",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools",
                "{{tool_id}}",
                "health"
              ]
            },
            "description": ""
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"OK\", () => pm.response.to.have.status(200));",
                  "pm.test(\"Has status\", () => pm.expect(pm.response.json()).to.have.property(\"status\"));"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Refresh Tool Health",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools/{{tool_id}}/health/refresh",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools",
                "{{tool_id}}",
                "health",
                "refresh"
              ]
            },
            "description": "",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"force\": true\n}"
            }
          },
          "response": []
        },
        {
          "name": "Update Tool Credentials",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools/{{tool_id}}/credentials",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools",
                "{{tool_id}}",
                "credentials"
              ]
            },
            "description": "",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"bearer\",\n  \"token\": \"ghp_newtoken123\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"OK\", () => pm.response.to.have.status(200));"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Webhook Config",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools/{{tool_id}}/webhook",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools",
                "{{tool_id}}",
                "webhook"
              ]
            },
            "description": ""
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"OK\", () => pm.response.to.have.status(200));",
                  "pm.test(\"Has webhook_url\", () => pm.expect(pm.response.json()).to.have.property(\"webhook_url\"));"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Migrate Tool to Template",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/tools/migrate/{{tool_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "tools",
                "migrate",
                "{{tool_id}}"
              ]
            },
            "description": "Migrates a dynamic tool to a template-based organization tool. This upgrades the tool to benefit from template features like better operation definitions, permissions, and metadata.\n\n**Use Cases:**\n- Upgrade manually discovered tools to use official templates\n- Gain access to template-defined operations and metadata\n- Enable permission-based operation filtering\n\n**Migration Process:**\n1. Verifies tool exists and belongs to tenant\n2. Detects matching template based on tool's base URL\n3. Creates new OrganizationTool from template\n4. Transfers credentials and configuration\n5. Returns migrated tool details\n\n**Requirements:**\n- Tool must be a dynamic tool (not already template-based)\n- Matching template must exist for the tool's provider\n- Tool must have valid base URL for template detection"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Migration successful\", () => pm.response.to.have.status(200));",
                  "pm.test(\"Has migrated_tool\", () => pm.expect(pm.response.json()).to.have.property(\"migrated_tool\"));",
                  "pm.test(\"Message confirms migration\", () => {",
                  "    const msg = pm.response.json().message;",
                  "    pm.expect(msg.toLowerCase()).to.include(\"migrated\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Tests",
          "item": [
            {
              "name": "Test: Invalid Tool ID - Health",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/v1/tools/invalid-id/health",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "tools",
                    "invalid-id",
                    "health"
                  ]
                },
                "description": ""
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Not Found\", () => pm.response.to.have.status(404));"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Test: Invalid Tool ID - Credentials",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/v1/tools/invalid-id/credentials",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "tools",
                    "invalid-id",
                    "credentials"
                  ]
                },
                "description": "",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"type\": \"bearer\",\n  \"token\": \"test\"\n}"
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Not Found\", () => pm.response.to.have.status(404));"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Test: Invalid Migration",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/v1/tools/migrate/invalid-id",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "tools",
                    "migrate",
                    "invalid-id"
                  ]
                },
                "description": ""
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Not Found or Bad Request\", () => {",
                      "    pm.expect([400, 404]).to.include(pm.response.code);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8081"
    },
    {
      "key": "auth_token",
      "value": ""
    },
    {
      "key": "refresh_token",
      "value": ""
    },
    {
      "key": "tenant_id",
      "value": "00000000-0000-0000-0000-000000000001"
    },
    {
      "key": "session_id",
      "value": ""
    },
    {
      "key": "tool_id",
      "value": ""
    },
    {
      "key": "discovery_session_id",
      "value": ""
    }
  ]
}